# TALLY NODE 사용 가이드 (사용자용)
이 문서는 EoRa-Pi 개발보드를 사용하여, 블랙매직 스위처와 vMix 소프트웨어 스위처의 PGM, PVW 정보를 마스터 -> 리시버 기기로 전달하여 RED, GREEN 색상으로 표시하는 TALLY LIGHT 장비를 쉽게 구현하고자 합니다.

<br>

## 1. 준비물
### 1.1 필수 공통 준비물
* 크롬 브라우저
* EoRa-Pi 개발보드 (한국 구매대행 링크: )
* WS2812B LED 모듈
### 1.2 3D 케이스 디자인에 맞는 준비물 ([3D 파일 확인하기](./3d_file/README.md))
* 3d 출력 케이스
* 광확산 PC판
* 18650 리튬이온배터리
* 18650 BMS
* 3핀 커넥터

<br>

## 2. 회로 연결
**EoRa-Pi 개발보드에 문제가 없는지 테스트를 위하여, 회로 연결 전 펌웨어 설치를 추천합니다.**

### 2.1 마스터 디바이스
* 별도의 GPIO 회로 연결 없이, 배터리만 연결

### 2.2 리시버 디바이스
* GPIO 45 : WS2812B **Data IN** 과 연결
* 3.3V : WS2812B **Vin** 과 연결
* GND : WS2812B **Vout** 과 연결

### 2.3 공통
* 18650 리튬이온배터리와 BMS 연결 후 EoRa-Pi 기본 제공되는 배터리 커넥터와 연결

<br>

## 2) 펌웨어 설치(가장 쉬운 방법)
브라우저에서 바로 설치할 수 있습니다.
- 사이트 상단의 ‘펌웨어 업로드’ 버튼 클릭
- 모드 선택: 마스터(송신기) 또는 리시버(수신기)
- 주파수 선택: 400MHz(433) 또는 900MHz(868/915)
  - 마스터와 모든 리시버는 반드시 같은 주파수로 설치하세요.
- 기기를 USB로 연결 → 연결 권한 요청 시 포트 선택
- ‘설치하기’ 버튼을 눌러 완료될 때까지 기다립니다.

문제가 생길 때
- BOOT 버튼을 누른 채 RESET 버튼을 한번 눌러 설치 모드로 다시 진입
- 다른 USB‑C 케이블(데이터 지원)로 교체
- Chrome/Edge/Opera 사용(사파리/파이어폭스는 미지원)

## 3) 마스터 처음 설정
마스터를 켜면 자체 와이파이(AP)를 엽니다.
- AP 이름(SSID): `TALLY_NODE_V1_AP_XXXX` (XXXX는 기기 MAC 하위 4자리)
- 비밀번호: `12345678`
- 주소: `http://192.168.4.1`

순서
1. 휴대폰/노트북으로 위 AP에 연결합니다.
2. 브라우저에서 `192.168.4.1`로 접속하면 대시보드가 열립니다.
3. ‘스위처’ 메뉴에서 사용하는 장비(ATEM/vMix)를 선택하고, 스위처의 IP를 적은 뒤 ‘연결’ 버튼을 누릅니다.
4. ‘시스템’ 메뉴에서 현장을 구분하는 “동기화 코드”를 정해주세요.
   - 같은 동기화 코드를 쓰는 장비끼리만 서로 통신합니다.
5. 필요 시 LED 밝기, 채널 개수(Max Count)도 조정합니다.

팁
- ‘네트워크’ 메뉴에서 사내 Wi‑Fi에 연결하면, 이후 같은 네트워크에서 더 편하게 접속할 수 있습니다.

## 4) 리시버 준비하기
1. 리시버를 켭니다. (마스터와 같은 주파수로 설치되어 있어야 합니다.)
2. 각 리시버의 채널 번호(카메라 번호)를 기기 버튼/OLED 메뉴로 맞춥니다.
3. 마스터와 같은 “동기화 코드”를 사용하는지 확인합니다.

이제 마스터가 스위처에서 받아온 상태를 무선으로 보내면, 리시버가 LED/OLED로 표시합니다.

## 5) 현장에서 이렇게 씁니다
- Program(온에어): 빨간색 LED
- Preview(대기): 초록색 LED
- 해당 없음/신호 없음: LED 꺼짐

라이브 중에는 스위처에서 소스가 바뀔 때, 해당 카메라에 달린 리시버의 LED가 자동으로 바뀝니다. OLED가 있다면 채널, 신호 상태 등이 함께 표시됩니다.

## 6) 문제가 생길 때(빠른 점검)
- 업로드 버튼이 안 보이거나 설치가 시작되지 않아요
  - Chrome/Edge/Opera를 사용하세요.
- 포트 선택이 안 떠요
  - BOOT 버튼을 누른 채 RESET 버튼을 눌러 설치 모드로 진입해 보세요.
  - 데이터 전송 가능한 USB‑C 케이블로 교체해 보세요.
- 리시버 LED가 반응하지 않아요
  - 마스터와 리시버의 주파수(400/900)가 같은지 확인하세요.
  - 마스터/리시버의 “동기화 코드”가 같은지 확인하세요.
  - 리시버의 채널 번호가 올바른지 확인하세요.
- 대시보드가 열리지 않아요
  - `TALLY_NODE_V1_AP_XXXX`에 연결했는지, 주소를 `192.168.4.1`로 열었는지 확인하세요.
  - ‘네트워크’에서 사내 Wi‑Fi를 연결했다면, 마스터가 받은 IP로 접속하세요.

## 7) 운영 팁
- 각 현장마다 서로 다른 “동기화 코드”를 쓰면 간섭을 줄일 수 있습니다.
- 카메라마다 리시버 채널을 고정해두고, 예비 리시버도 같은 채널로 준비하면 전환이 빠릅니다.
- 밝기는 현장 조도에 맞게 조정하세요. 배터리로 쓰는 경우 밝기를 낮추면 사용 시간이 늘어납니다.

## 8) 업데이트/추가 정보
- 펌웨어 업데이트는 사이트 상단의 ‘펌웨어 업로드’에서 언제든 다시 설치할 수 있습니다.
- 자세한 기술 문서가 필요하면 프로젝트의 개발자 문서를 참고하세요.
